-- Maybe to improve performance...
	-- See: http://awesome.naquadah.org/wiki/Widget_Layouts
--
-- Volume widget
--
	-- But for now, lets use these images...
	volume_img = wibox.widget.imagebox()
	volume_img:set_image(DIR_ICONS .. "/snd/vol.png")
	-- This is the actual 'widget'
	volume_icon = wibox.widget.imagebox()
	volume_icon:set_image(DIR_ICONS .. "/snd/norm4.png")
	-- This internvall works fine, updating the image to current state
	timer_vol = timer({ timeout = 30 })
--
-- Enums
--
	local capi = {
		mouse = mouse,
		screen = screen
	}
--
-- Functions
--
	function update_icon() 
		local icon = get_bash_string( DIR_SCRIPTS .. "/snd.sh","image")
		volume_icon:set_image( DIR_ICONS .. "/snd/" .. icon )
	end
	function volume_change(mode)
		os.execute(DIR_SCRIPTS .. "/snd.sh " .. mode )
		update_icon()
	end
--
-- Signals
--
	timer_vol:connect_signal("timeout", update_icon )
	volume_icon:connect_signal('mouse::leave', function () naughty.destroy(usage) end)
	volume_icon:connect_signal('mouse::enter', 
		function() 
			usage = naughty.notify({
				text = get_bash_string( DIR_SCRIPTS .. "/snd.sh","vol"),
				timeout = 0,
				hover_timeout = 0.5,
				screen = capi.mouse.screen
			})
		end)
--
-- Mouse interactions
--
	-- Expecting "World of Warcraft gaming mouse"
	-- xev: Left click = 1
	-- xev: Right click = 3
	-- xev: Wheel click = 2
	-- xev: Wheel Up = 4
	-- xev: Wheel Down = 5
	-- xev: Thumb front click = 9
	-- xev: Thumb back click = 8
	-- xev: Buttons: 6,7,10-15 not reckognized
	
	volume_icon:buttons(awful.util.table.join(
		awful.button({ },4,function() volume_change("up") end),
		awful.button({ },5,function() volume_change("down") end),
		awful.button({ },1,function() volume_change("mute") end),
		awful.button({ },2,function() os.execute(term_cmd .. "alsamixer") end)
	))
	
--
-- Action
--
	timer_vol:start()
	
